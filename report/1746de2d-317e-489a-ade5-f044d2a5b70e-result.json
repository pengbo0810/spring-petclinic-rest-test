{"name": "test_add_visit_invalid[payload0-invalid month]", "status": "failed", "statusDetails": {"message": "AssertionError: expected 400, got 500: {\"type\":\"http://localhost:9966/petclinic/api/visits\",\"title\":\"HttpMessageNotReadableException\",\"status\":500,\"detail\":\"JSON parse error: Cannot deserialize value of type `java.time.LocalDate` from String \\\"2025-13-01\\\": Failed to deserialize java.time.LocalDate: (java.time.format.DateTimeParseException) Text '2025-13-01' could not be parsed: Invalid value for MonthOfYear (valid values 1 - 12): 13\",\"instance\":\"/petclinic/api/visits\",\"timestamp\":\"2025-08-19T04:05:13.428412100Z\"}\nassert 500 == 400\n +  where 500 = <Response [500]>.status_code", "trace": "base_url = 'http://localhost:9966/petclinic/api'\npayload = {'date': '2025-13-01', 'description': 'Bad date', 'pet': {'id': 1}}, case = 'invalid month'\n\n    @allure.epic(\"Visits\")\n    @allure.feature(\"Validation\")\n    @pytest.mark.parametrize(\"payload,case\", [\n        ({\"date\":\"2025-13-01\", \"description\":\"Bad date\", \"pet\":{\"id\":1}}, \"invalid month\"),\n        ({\"date\":\"2025-01-01\", \"description\":\"No pet\"},                   \"missing pet\"),\n        ({\"date\":\"\",           \"description\":\"Empty date\", \"pet\":{\"id\":1}},\"empty date\"),\n        ({\"date\":\"2025-01-01\", \"description\":\"\",           \"pet\":{\"id\":1}},\"empty description\"),\n    ])\n    def test_add_visit_invalid(base_url, payload, case):\n        url = f\"{base_url}/visits\"\n        with allure.step(f\"POST {url} | case: {case}\"):\n            r = requests.post(url, json=payload, timeout=10)\n            attach_http(\"Add Visit Invalid\", url, \"POST\",\n                        {\"Content-Type\": \"application/json\"}, payload, r)\n>           assert r.status_code == 400, f\"expected 400, got {r.status_code}: {r.text}\"\nE           AssertionError: expected 400, got 500: {\"type\":\"http://localhost:9966/petclinic/api/visits\",\"title\":\"HttpMessageNotReadableException\",\"status\":500,\"detail\":\"JSON parse error: Cannot deserialize value of type `java.time.LocalDate` from String \\\"2025-13-01\\\": Failed to deserialize java.time.LocalDate: (java.time.format.DateTimeParseException) Text '2025-13-01' could not be parsed: Invalid value for MonthOfYear (valid values 1 - 12): 13\",\"instance\":\"/petclinic/api/visits\",\"timestamp\":\"2025-08-19T04:05:13.428412100Z\"}\nE           assert 500 == 400\nE            +  where 500 = <Response [500]>.status_code\n\nsrc\\test\\tests_api\\test_visits_negative.py:19: AssertionError"}, "steps": [{"name": "POST http://localhost:9966/petclinic/api/visits | case: invalid month", "status": "failed", "statusDetails": {"message": "AssertionError: expected 400, got 500: {\"type\":\"http://localhost:9966/petclinic/api/visits\",\"title\":\"HttpMessageNotReadableException\",\"status\":500,\"detail\":\"JSON parse error: Cannot deserialize value of type `java.time.LocalDate` from String \\\"2025-13-01\\\": Failed to deserialize java.time.LocalDate: (java.time.format.DateTimeParseException) Text '2025-13-01' could not be parsed: Invalid value for MonthOfYear (valid values 1 - 12): 13\",\"instance\":\"/petclinic/api/visits\",\"timestamp\":\"2025-08-19T04:05:13.428412100Z\"}\nassert 500 == 400\n +  where 500 = <Response [500]>.status_code\n", "trace": "  File \"D:\\project\\spring-petclinic-rest\\src\\test\\tests_api\\test_visits_negative.py\", line 19, in test_add_visit_invalid\n    assert r.status_code == 400, f\"expected 400, got {r.status_code}: {r.text}\"\n"}, "attachments": [{"name": "Add Visit Invalid - Request", "source": "f3647bf9-44b2-47f8-8d27-44a0c82aaf6c-attachment.json", "type": "application/json"}, {"name": "Add Visit Invalid - Response", "source": "9381eab9-ccb6-42f2-816b-277b482a2cb1-attachment.json", "type": "application/json"}], "start": 1755576313413, "stop": 1755576313434}], "parameters": [{"name": "payload", "value": "{'date': '2025-13-01', 'description': 'Bad date', 'pet': {'id': 1}}"}, {"name": "case", "value": "'invalid month'"}], "start": 1755576313413, "stop": 1755576313434, "uuid": "2ad2ec91-e3c6-4452-9cfd-24deb7de4632", "historyId": "44d0e52a206eb39544b6364cd54cd3ba", "testCaseId": "6b8b937de05ca7bcb71b7dbc375c347a", "fullName": "src.test.tests_api.test_visits_negative#test_add_visit_invalid", "labels": [{"name": "epic", "value": "Visits"}, {"name": "feature", "value": "Validation"}, {"name": "parentSuite", "value": "src.test.tests_api"}, {"name": "suite", "value": "test_visits_negative"}, {"name": "host", "value": "LAPTOP-NDFADGOV"}, {"name": "thread", "value": "2780-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "src.test.tests_api.test_visits_negative"}], "titlePath": ["src", "test", "tests_api", "test_visits_negative.py"]}